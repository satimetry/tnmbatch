*****************************************************************************
Wed Apr  1 15:10:00 AEDT 2015
*****************************************************************************
Check jenkins server application status ...
Jenkins Application is starting
RESULT:
jenkins started
Check jenkins client application status ...
Jenkins Client is already started
Check nudge database application status ...
Nudge Database Application is starting
RESULT:
nudgedb started
Check nudge client application status ...
Nudge Client Application is already started
Check nudge server application status ...
Nudge Server Application is already started
Do withings ...
Loading required package: methods
Loading required package: bitops
[1] "--->INSERTOBS WEIGHT --7"

> Sys.setenv(NOAWT = "true")

> library(httr)

> library(rjson)

> library("RCurl")

> user <- getUser(rooturl, userid)

> username <- user["username"]

> pushoveruser <- user["pushoveruser"]

> fitbitkey <- user["fitbitkey"]

> fitbitsecret <- user["fitbitsecret"]

> fitbitappname <- user["fitbitappname"]

> if (is.na(fitbitkey)) {
+     stop("fitbitkey does not exist")
+ }

> token_url <- "https://api.fitbit.com/oauth/request_token"

> access_url <- "https://api.fitbit.com/oauth/access_token"

> auth_url <- "https://www.fitbit.com/oauth/authorize"

> fbr = oauth_app(fitbitappname, fitbitkey, fitbitsecret)

> token <- readRDS(file = paste("user/", username, "/fitbit-token.RDS", 
+     sep = ""))

> sig = sign_oauth1.0(fbr, token = token$oauth_token, 
+     token_secret = token$oauth_token_secret)
[1] "attempt to apply non-function"
[1] "--->INSERTOBS FAT --7"

> Sys.setenv(NOAWT = "true")

> library(httr)

> library(rjson)

> library("RCurl")

> user <- getUser(rooturl, userid)

> username <- user["username"]

> pushoveruser <- user["pushoveruser"]

> fitbitkey <- user["fitbitkey"]

> fitbitsecret <- user["fitbitsecret"]

> fitbitappname <- user["fitbitappname"]

> if (is.na(fitbitkey)) {
+     stop("fitbitkey does not exist")
+ }

> token_url <- "https://api.fitbit.com/oauth/request_token"

> access_url <- "https://api.fitbit.com/oauth/access_token"

> auth_url <- "https://www.fitbit.com/oauth/authorize"

> fbr = oauth_app(fitbitappname, fitbitkey, fitbitsecret)

> token <- readRDS(file = paste("user/", username, "/fitbit-token.RDS", 
+     sep = ""))

> sig = sign_oauth1.0(fbr, token = token$oauth_token, 
+     token_secret = token$oauth_token_secret)
[1] "attempt to apply non-function"
[1] "--->APPLYNUDGES --7"
[1] "bmi"

> Sys.setenv(NOAWT = "true")

> library(rjson)

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (nrow(userobsDF) > 1000) {
+     userobsDF <- subset(userobsDF, regexpr(Sys.Date(), userobsDF[, 
+         "obsdate"]) > 0)
+ }

> delFact(rooturl, programid, groupid = userid, factname = obsname)
[1] ""

> postFact(rooturl, programid, groupid = userid, factname = obsname, 
+     userobsDF)
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-01 08:15:00\" , \"obsvalue\": 28.8 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-02 08:15:00\" , \"obsvalue\": 28.9 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-03 08:15:00\" , \"obsvalue\": 28.9 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-04 08:15:00\" , \"obsvalue\": 28.8 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-05 08:15:00\" , \"obsvalue\": 28.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-06 08:15:00\" , \"obsvalue\": 28.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-07 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-10 08:15:00\" , \"obsvalue\": 28.3 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-11 08:15:00\" , \"obsvalue\": 28.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-12 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-13 08:15:00\" , \"obsvalue\": 28.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-14 08:15:00\" , \"obsvalue\": 28.5 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-15 08:15:00\" , \"obsvalue\": 28.5 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-16 08:15:00\" , \"obsvalue\": 28.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-17 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-18 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-19 08:15:00\" , \"obsvalue\": 27.9 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-20 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-21 08:15:00\" , \"obsvalue\": 28.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-22 08:15:00\" , \"obsvalue\": 28.3 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-23 08:15:00\" , \"obsvalue\": 28.0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-24 08:15:00\" , \"obsvalue\": 27.8 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-25 08:15:00\" , \"obsvalue\": 27.8 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-26 08:15:00\" , \"obsvalue\": 28.0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-27 08:15:00\" , \"obsvalue\": 27.6 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-02-28 07:15:00\" , \"obsvalue\": 27.72 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-01 07:15:00\" , \"obsvalue\": 27.92 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-02 07:15:00\" , \"obsvalue\": 27.93 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-03 07:15:00\" , \"obsvalue\": 27.69 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-04 07:15:00\" , \"obsvalue\": 27.84 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-06 07:15:00\" , \"obsvalue\": 27.47 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-07 07:15:00\" , \"obsvalue\": 27.76 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-15 07:15:00\" , \"obsvalue\": 27.78 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-19 07:15:00\" , \"obsvalue\": 27.74 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-20 07:15:00\" , \"obsvalue\": 27.83 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-21 07:15:00\" , \"obsvalue\": 27.48 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-22 07:15:00\" , \"obsvalue\": 27.61 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-23 07:15:00\" , \"obsvalue\": 27.63 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-24 07:15:00\" , \"obsvalue\": 27.35 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-25 07:15:00\" , \"obsvalue\": 27.18 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-26 07:15:00\" , \"obsvalue\": 27.55 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-27 07:15:00\" , \"obsvalue\": 27.24 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-28 07:15:00\" , \"obsvalue\": 27.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-29 07:15:00\" , \"obsvalue\": 27.75 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-30 07:15:00\" , \"obsvalue\": 27.73 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-31 07:15:00\" , \"obsvalue\": 27.47 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": bmi , \"obsdate\": \"2015-03-31 07:15:00\" , \"obsvalue\": 27.47 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"

> getNudge(rooturl, programid, groupid = userid, factname = obsname, 
+     rulename = rulename)
[1] "[{\"id\":\"7\",\"ruledate\":\"2015-04-01\",\"rulemsg\":\"Nudge says that your BMI minimum was 27.18 over the past 30 days\",\"rulename\":\"ruleLowBmi\",\"ruledata\":27.18}, {\"id\":\"7\",\"ruledate\":\"2015-04-01\",\"rulemsg\":\"Nudge says that your BMI maximum was 27.84 over the past 30 days\",\"rulename\":\"ruleHighBmi\",\"ruledata\":27.84}]"

> factouts <- getFactsystem(rooturl, programid, groupid = userid, 
+     factname = obsname)

> outputDF <- c()

> for (factout in factouts) {
+     outputDF <- cbind(outputDF, c(id = fromJSON(factout$factjson)$id, 
+         rulename = fromJSON(factout$factjson) .... [TRUNCATED] 

> if (is.null(outputDF)) {
+     stop("outputDF is NULL")
+ }

> outputDF = data.frame(t(outputDF))

> optinruleviewDF <- getOptinruleviewDF(rooturl, programid, 
+     userid)

> outputDF <- outputDF[order(outputDF[, "rulename"]), 
+     ]

> outputDF <- subset(outputDF, outputDF[, "rulename"] %in% 
+     optinruleviewDF)

> if (nrow(outputDF) == 0) {
+     stop("No opt-ins")
+ }
[1] "No opt-ins"
[1] "--->APPLYNUDGES --7"
[1] "weight"

> Sys.setenv(NOAWT = "true")

> library(rjson)

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (nrow(userobsDF) > 1000) {
+     userobsDF <- subset(userobsDF, regexpr(Sys.Date(), userobsDF[, 
+         "obsdate"]) > 0)
+ }

> delFact(rooturl, programid, groupid = userid, factname = obsname)
[1] ""

> postFact(rooturl, programid, groupid = userid, factname = obsname, 
+     userobsDF)
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-01 09:50:00\" , \"obsvalue\": 83.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-02 07:31:00\" , \"obsvalue\": 83.47 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-03 07:21:00\" , \"obsvalue\": 83.46 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-04 07:35:00\" , \"obsvalue\": 83.09 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-05 08:08:00\" , \"obsvalue\": 82.19 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-06 07:39:00\" , \"obsvalue\": 81.37 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-07 08:29:00\" , \"obsvalue\": 81.31 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-10 10:57:00\" , \"obsvalue\": 81.86 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-11 07:45:00\" , \"obsvalue\": 82.21 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-12 07:33:00\" , \"obsvalue\": 81.32 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-13 07:20:00\" , \"obsvalue\": 81.53 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-14 08:11:00\" , \"obsvalue\": 82.27 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-15 09:14:00\" , \"obsvalue\": 82.29 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-16 07:43:00\" , \"obsvalue\": 82.06 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-17 07:59:00\" , \"obsvalue\": 81.12 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-18 08:13:00\" , \"obsvalue\": 81.31 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-19 07:17:00\" , \"obsvalue\": 80.54 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-20 07:50:00\" , \"obsvalue\": 81.35 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-21 08:56:00\" , \"obsvalue\": 81.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-22 09:17:00\" , \"obsvalue\": 81.91 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-23 07:58:00\" , \"obsvalue\": 80.81 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-24 06:40:00\" , \"obsvalue\": 80.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-25 06:43:00\" , \"obsvalue\": 80.45 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-26 07:57:00\" , \"obsvalue\": 80.89 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-27 07:11:00\" , \"obsvalue\": 79.89 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-02-28 07:15:00\" , \"obsvalue\": 80.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-01 07:15:00\" , \"obsvalue\": 80.7 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-02 07:15:00\" , \"obsvalue\": 80.7 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-03 07:15:00\" , \"obsvalue\": 80 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-05 07:15:00\" , \"obsvalue\": 80.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-06 07:15:00\" , \"obsvalue\": 79.3 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-07 07:15:00\" , \"obsvalue\": 80.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-15 07:15:00\" , \"obsvalue\": 80.2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-19 07:15:00\" , \"obsvalue\": 80.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-20 07:15:00\" , \"obsvalue\": 80.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-21 07:15:00\" , \"obsvalue\": 79.4 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-22 07:15:00\" , \"obsvalue\": 79.7 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-23 07:15:00\" , \"obsvalue\": 79.8 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-24 07:15:00\" , \"obsvalue\": 79 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-25 07:15:00\" , \"obsvalue\": 78.5 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-26 07:15:00\" , \"obsvalue\": 79.6 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-27 07:15:00\" , \"obsvalue\": 78.7 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-28 07:15:00\" , \"obsvalue\": 79.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-29 07:15:00\" , \"obsvalue\": 80.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-30 07:15:00\" , \"obsvalue\": 80.1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-31 07:15:00\" , \"obsvalue\": 79.3 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": weight , \"obsdate\": \"2015-03-31 07:15:00\" , \"obsvalue\": 79.3 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"

> getNudge(rooturl, programid, groupid = userid, factname = obsname, 
+     rulename = rulename)
[1] "[{\"id\":\"7\",\"ruledate\":\"2015-04-01\",\"rulemsg\":\"Nudge says that your WEIGHT minimum was 78.50 over the past 30 days\",\"rulename\":\"ruleLowWeight\",\"ruledata\":78.5}, {\"id\":\"7\",\"ruledate\":\"2015-04-01\",\"rulemsg\":\"Nudge says that your WEIGHT maximum was 80.40 over the past 30 days\",\"rulename\":\"ruleHighWeight\",\"ruledata\":80.4}, {\"id\":\"7\",\"ruledate\":\"2015-04-01\",\"rulemsg\":\"Nudge says that your WEIGHT averaged 79.48 over the past 7 days\",\"rulename\":\"ruleAverageWeight\",\"ruledata\":79.48333333333333}]"

> factouts <- getFactsystem(rooturl, programid, groupid = userid, 
+     factname = obsname)

> outputDF <- c()

> for (factout in factouts) {
+     outputDF <- cbind(outputDF, c(id = fromJSON(factout$factjson)$id, 
+         rulename = fromJSON(factout$factjson) .... [TRUNCATED] 

> if (is.null(outputDF)) {
+     stop("outputDF is NULL")
+ }

> outputDF = data.frame(t(outputDF))

> optinruleviewDF <- getOptinruleviewDF(rooturl, programid, 
+     userid)

> outputDF <- outputDF[order(outputDF[, "rulename"]), 
+     ]

> outputDF <- subset(outputDF, outputDF[, "rulename"] %in% 
+     optinruleviewDF)

> if (nrow(outputDF) == 0) {
+     stop("No opt-ins")
+ }

> smsDF <- outputDF

> today <- Sys.Date()

> if (nrow(smsDF) == 0) {
+     stop("No messages")
+ }

> for (i in 1:nrow(smsDF)) {
+     print(smsDF[i, "rulename"])
+     rule <- getRule(rooturl, smsDF[i, "rulename"])
+     msg <- c(programid = program .... [TRUNCATED] 
[1] ruleAverageWeight
Levels: ruleAverageWeight ruleHighWeight ruleLowWeight
[1] "Posting msg-->{ \"programid\" :1, \"userid\" :7, \"ruleid\" :104, \"rulename\" :\"ruleAverageWeight\", \"ruledate\" :\"2015-04-01\", \"msgtxt\" :\"Nudge says that your WEIGHT averaged 79.48 over the past 7 days\" }"
[1] ruleHighWeight
Levels: ruleAverageWeight ruleHighWeight ruleLowWeight
[1] "Posting msg-->{ \"programid\" :1, \"userid\" :7, \"ruleid\" :105, \"rulename\" :\"ruleHighWeight\", \"ruledate\" :\"2015-04-01\", \"msgtxt\" :\"Nudge says that your WEIGHT maximum was 80.40 over the past 30 days\" }"
[1] ruleLowWeight
Levels: ruleAverageWeight ruleHighWeight ruleLowWeight
[1] "Posting msg-->{ \"programid\" :1, \"userid\" :7, \"ruleid\" :106, \"rulename\" :\"ruleLowWeight\", \"ruledate\" :\"2015-04-01\", \"msgtxt\" :\"Nudge says that your WEIGHT minimum was 78.50 over the past 30 days\" }"
[1] "--->PUSHNOTIFICATION :7"

> user <- getUser(rooturl, userid)

> username <- user["username"]

> pushoveruser <- user["pushoveruser"]

> msgs <- getMsg(rooturl, programid, userid)
[1] "[{\"msgid\":1812,\"programid\":1,\"userid\":7,\"ruleid\":104,\"rulename\":\"ruleAverageWeight\",\"ruledate\":1427846400000,\"msgtxt\":\"Nudge says that your WEIGHT averaged 79.48 over the past 7 days\",\"issent\":0,\"isread\":0,\"urldesc\":null},{\"msgid\":1813,\"programid\":1,\"userid\":7,\"ruleid\":105,\"rulename\":\"ruleHighWeight\",\"ruledate\":1427846400000,\"msgtxt\":\"Nudge says that your WEIGHT maximum was 80.40 over the past 30 days\",\"issent\":0,\"isread\":0,\"urldesc\":null},{\"msgid\":1814,\"programid\":1,\"userid\":7,\"ruleid\":106,\"rulename\":\"ruleLowWeight\",\"ruledate\":1427846400000,\"msgtxt\":\"Nudge says that your WEIGHT minimum was 78.50 over the past 30 days\",\"issent\":0,\"isread\":0,\"urldesc\":null}]"

> for (msg in msgs) {
+     msgtxt <- paste(msg["msgtxt"], ". To opt-out from nudges visit: ", 
+         "http://www.thenudgemachine.com/rulesettings ..." ... [TRUNCATED] 
{"status":1,"request":"12fe663832ed86b7dea94b6c9d5b0da2"}{"status":1,"request":"a78fd254c1b50c06d032f9f99deabc6d"}{"status":1,"request":"2c7b6a641d48e4676a5ddb91a1cddd32"}[1] "--->PLOTS :7"
[1] "bmi"

> Sys.setenv(NOAWT = "true")

> library(RColorBrewer)

> user <- getUser(rooturl, userid)

> username <<- user["username"]

> userobsDF <- NULL

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (is.null(userobsDF)) {
+     stop("userobsDF is NULL")
+ }

> if (nrow(userobsDF) == 0) {
+     stop("userobsDF is empty")
+ }

> obsvalues = as.numeric(as.character(userobsDF[, "obsvalue"]))

> obsdate <- as.POSIXct(userobsDF[, "obsdate"], format = "%Y-%m-%d %H:%M:%S")

> fileName = paste(imagesdir, "/lifecoach/user/", username, 
+     "/", obsname, ".png", sep = "")

> png(paste(fileName, sep = ""), res = ppi, width = 5 * 
+     ppi, height = 4 * ppi, pointsize = 10, units = "px")

> plot(obsdate, obsvalues, type = "b", axes = FALSE, 
+     ylab = obsname, ylim = c(floor(min(obsvalues)), ceiling(max(obsvalues))), 
+     xlim = c( .... [TRUNCATED] 

> axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+     0.5), las = 1, cex.axis = 0.6)

> axis(1, at = obsdate, labels = substr(obsdate, 1, 
+     10), cex.axis = 0.4, las = 2)

> if (obsname == "bmi") {
+     axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+         0.25), las = 1, cex.axis = 0.6)
+     abli .... [TRUNCATED] 

> if (obsname == "weight") {
+     abline(h = 80, lty = 2)
+ }

> dev.off()
null device 
          1 
[1] "--->PLOTS :7"
[1] "weight"

> Sys.setenv(NOAWT = "true")

> library(RColorBrewer)

> user <- getUser(rooturl, userid)

> username <<- user["username"]

> userobsDF <- NULL

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (is.null(userobsDF)) {
+     stop("userobsDF is NULL")
+ }

> if (nrow(userobsDF) == 0) {
+     stop("userobsDF is empty")
+ }

> obsvalues = as.numeric(as.character(userobsDF[, "obsvalue"]))

> obsdate <- as.POSIXct(userobsDF[, "obsdate"], format = "%Y-%m-%d %H:%M:%S")

> fileName = paste(imagesdir, "/lifecoach/user/", username, 
+     "/", obsname, ".png", sep = "")

> png(paste(fileName, sep = ""), res = ppi, width = 5 * 
+     ppi, height = 4 * ppi, pointsize = 10, units = "px")

> plot(obsdate, obsvalues, type = "b", axes = FALSE, 
+     ylab = obsname, ylim = c(floor(min(obsvalues)), ceiling(max(obsvalues))), 
+     xlim = c( .... [TRUNCATED] 

> axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+     0.5), las = 1, cex.axis = 0.6)

> axis(1, at = obsdate, labels = substr(obsdate, 1, 
+     10), cex.axis = 0.4, las = 2)

> if (obsname == "bmi") {
+     axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+         0.25), las = 1, cex.axis = 0.6)
+     abli .... [TRUNCATED] 

> if (obsname == "weight") {
+     abline(h = 80, lty = 2)
+ }

> dev.off()
null device 
          1 
[1] "--->PLOTS :7"
[1] "fat"

> Sys.setenv(NOAWT = "true")

> library(RColorBrewer)

> user <- getUser(rooturl, userid)

> username <<- user["username"]

> userobsDF <- NULL

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (is.null(userobsDF)) {
+     stop("userobsDF is NULL")
+ }

> if (nrow(userobsDF) == 0) {
+     stop("userobsDF is empty")
+ }

> obsvalues = as.numeric(as.character(userobsDF[, "obsvalue"]))

> obsdate <- as.POSIXct(userobsDF[, "obsdate"], format = "%Y-%m-%d %H:%M:%S")

> fileName = paste(imagesdir, "/lifecoach/user/", username, 
+     "/", obsname, ".png", sep = "")

> png(paste(fileName, sep = ""), res = ppi, width = 5 * 
+     ppi, height = 4 * ppi, pointsize = 10, units = "px")

> plot(obsdate, obsvalues, type = "b", axes = FALSE, 
+     ylab = obsname, ylim = c(floor(min(obsvalues)), ceiling(max(obsvalues))), 
+     xlim = c( .... [TRUNCATED] 

> axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+     0.5), las = 1, cex.axis = 0.6)

> axis(1, at = obsdate, labels = substr(obsdate, 1, 
+     10), cex.axis = 0.4, las = 2)

> if (obsname == "bmi") {
+     axis(2, at = seq(floor(min(obsvalues)), ceiling(max(obsvalues)), 
+         0.25), las = 1, cex.axis = 0.6)
+     abli .... [TRUNCATED] 

> if (obsname == "weight") {
+     abline(h = 80, lty = 2)
+ }

> dev.off()
null device 
          1 
Do GAS ...
Loading required package: methods
Loading required package: bitops
[1] "--->APPLYNUDGES: 7-gas31"

> Sys.setenv(NOAWT = "true")

> library(rjson)

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (nrow(userobsDF) > 1000) {
+     userobsDF <- subset(userobsDF, regexpr(Sys.Date(), userobsDF[, 
+         "obsdate"]) > 0)
+ }

> delFact(rooturl, programid, groupid = userid, factname = obsname)
[1] ""

> postFact(rooturl, programid, groupid = userid, factname = obsname, 
+     userobsDF)
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-02-08 23:00:00\" , \"obsvalue\": 2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-02-15 23:00:00\" , \"obsvalue\": 1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-02-22 23:00:00\" , \"obsvalue\": 0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-01 23:00:00\" , \"obsvalue\": 0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-08 22:00:00\" , \"obsvalue\": 0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-15 22:00:00\" , \"obsvalue\": -2 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-22 22:00:00\" , \"obsvalue\": -1 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-28 17:17:40\" , \"obsvalue\": 0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"
[1] "Posting fact-->{ \"username\": 7 , \"obsname\": gas31 , \"obsdate\": \"2015-03-28 17:17:40\" , \"obsvalue\": 0 , \"obsdesc\": \"Generated using R sysbatch procedure\" }"

> getNudge(rooturl, programid, groupid = userid, factname = obsname, 
+     rulename = rulename)
[1] "[]"

> factouts <- getFactsystem(rooturl, programid, groupid = userid, 
+     factname = obsname)

> outputDF <- c()

> for (factout in factouts) {
+     outputDF <- cbind(outputDF, c(id = fromJSON(factout$factjson)$id, 
+         rulename = fromJSON(factout$factjson) .... [TRUNCATED] 

> if (is.null(outputDF)) {
+     stop("outputDF is NULL")
+ }
[1] "outputDF is NULL"
[1] "--->PLOTS: 7-gas31"

> Sys.setenv(NOAWT = "true")

> library("lattice")

> library("MASS")

> library(ggplot2)

> library(rjson)

> userobsDF <- getUserobsDF(rooturl, programid, userid, 
+     obsname)

> if (is.null(userobsDF)) {
+     stop("No userobsDF records")
+ }

> userobss <- getUserobs(rooturl, programid, userid, 
+     obsname)
[1] "[{\"userobsid\":42512,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"0\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1427523460000,\"obstype\":\"poll\"},{\"userobsid\":42513,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"0\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1424606400000,\"obstype\":\"poll\"},{\"userobsid\":42514,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"1\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1424001600000,\"obstype\":\"poll\"},{\"userobsid\":42515,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"2\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1423396800000,\"obstype\":\"poll\"},{\"userobsid\":42516,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"0\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1425211200000,\"obstype\":\"poll\"},{\"userobsid\":42517,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"-2\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1426417200000,\"obstype\":\"poll\"},{\"userobsid\":42519,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"0\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1425812400000,\"obstype\":\"poll\"},{\"userobsid\":42520,\"programid\":1,\"userid\":7,\"obsname\":\"gas31\",\"obsvalue\":\"-1\",\"obsdesc\":\"Be more healthy By following the 5:2 Fast Diet\",\"obsdate\":1427022000000,\"obstype\":\"poll\"}]"

> user <- getUser(rooturl, userid)

> username <- user["username"]

> x <- c()

> for (i in 1:nrow(userobsDF)) {
+     x <- append(x, userobsDF[i, "obsvalue"])
+ }

> if (length(x) == 0) {
+     stop("No GAS records")
+ }

> polldesc <- obsname

> dir.create(file.path(paste(imagesdir, "/lifecoach/user/", 
+     username, sep = "")), showWarnings = FALSE)

> filenamebp = paste(imagesdir, "/lifecoach/user/", 
+     username, "/", obsname, "bp.png", sep = "")

> filenamexy = paste(imagesdir, "/lifecoach/user/", 
+     username, "/", obsname, "xy.png", sep = "")

> png(filenamebp, res = ppi, width = 5 * ppi, height = 4 * 
+     ppi, units = "px")

> ylim <- c(0, 100)

> xpct <- (table(x)/sum(table(x))) * 100

> bp <- barplot(xpct, xaxt = "n", ylab = "Percentage", 
+     ylim = ylim, xlab = "Goal Attainment Scale Outcome", col = "deepskyblue1", 
+     main = .... [TRUNCATED] 

> text(x = bp, y = xpct, label = table(x), pos = 3, 
+     cex = 0.8, col = "red")

> xunique <- unique(unlist(x, use.names = FALSE))

> if (length(xunique) == 5) {
+     axis(1, at = bp, labels = c("Worst \nExpected", "Less Than \nExpected", 
+         "Expected", "More Than \nExpect ..." ... [TRUNCATED] 

> axis(2, at = seq(0, 100, by = 10))

> dev.off()
null device 
          1 

> obsdate <- as.POSIXct(userobsDF[, "obsdate"], format = "%Y-%m-%d %H:%M:%S")

> obsvalue <- userobsDF[, "obsvalue"]

> x1 <- lm(obsvalue ~ obsdate)

> png(filenamexy, res = ppi, width = 5 * ppi, height = 4 * 
+     ppi, units = "px")

> plot(obsdate, obsvalue, type = "b", axes = FALSE, 
+     ylab = "Response", ylim = c(-2, 2), xlim = c(min(obsdate), 
+         max(obsdate)), xlab = .... [TRUNCATED] 

> axis(2, at = seq(-2, 2, by = 1), labels = c("Worst \nExpected", 
+     "Less Than \nExpected", "Expected", "More Than \nExpected", 
+     "Best \nEx ..." ... [TRUNCATED] 

> axis(1, at = obsdate, labels = substr(obsdate, 6, 
+     10), cex.axis = 0.8, las = 2)

> grid()

> loc <- par("usr")

> box()

> dev.off()
null device 
          1 
[1] "--->PUSHNOTIFICATION: 7"

> user <- getUser(rooturl, userid)

> username <- user["username"]

> pushoveruser <- user["pushoveruser"]

> msgs <- getMsg(rooturl, programid, userid)
[1] "[]"

> for (msg in msgs) {
+     msgtxt <- paste(msg["msgtxt"], ". To opt-out from nudges visit: ", 
+         "http://www.thenudgemachine.com/rulesettings ..." ... [TRUNCATED] 
On branch master
Your branch is up-to-date with 'origin/master'.

nothing to commit, working directory clean
Everything up-to-date
